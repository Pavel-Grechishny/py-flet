<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS 19 jQuery title</title>
    <script src="jquery-3.7.0.min.js"></script>
    <style>
    :root{
        --offset: 10px;
    }
    body{ 
        font-family: Helvetica, sans-serif;
        height: 150vh; 
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        display: flex;  
        align-items: flex-start;
        justify-content: center; 
        background: grey;
    }
    .wrapper{
        height: 50%;
        width: 50%;
        border: 1px solid grey;
        background: white;
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        flex-wrap: wrap;
    }
    @media screen and (max-width: 540px) {
        .wrapper{
            width: 90%;
            height: 100%;
            flex-direction: column;
        }
    }
    

    /* Buttons */

    .btn-title{
        display: none;
    }
    .show{
        display: block;
    }
    .btn-title{
        background: blueviolet;
        min-width: 100%;
        position: absolute;
        left: 0;
        z-index: 5;
    }
    .top{
        bottom: calc(100% + var(--offset));

    }
    .bottom{
        top: calc(100% + var(--offset));
    }
    .top::before, .bottom::before{
        content: "";
        position: absolute;
        left: calc(50% - 7px);
        background: blueviolet;
        width: 10px;
        height: 10px;
        transform: rotate(45deg);
    }
    .top::before{
        bottom: -5px;
    }
    .bottom::before{
        top: -5px;
    }
    button{
        color:rgb(255,255,255);
        line-height: 45px;
        padding: 0 30px;
        font-weight: bold;
        border: none;
        background: rgb(66,173,74);
        border-radius: 7px;
        font-size: 1rem;
        position: relative;
        margin: var(--offset);
    }
    button:hover{
        background: rgb(44,119,49);
    }
    </style>
</head>
<body>
 
    
    <script>
        "use strict";
        $ === jQuery ? console.log('jQuery подключен') : console.log('Нет соединения с jQuery');

        // создаем несколько кнопок
        function createButtons(count) {
            $('body script').before($('<div>').addClass('wrapper'));
            for(let i = 0; i < count; i++){
                $('div').append($('<button>')
                    .append($('<span>').addClass('btn-text').text('Send'))
                    .append($('<span>').addClass('btn-title top').text('Подсказка'))
                );
            }    
        }
        // 10 штук 
        createButtons(10);
        
        // проверку на остаток высоты вынести в отдельную функцию не успел (стр 121-124)
        $('button').mouseenter(event => {
            const title = $(event.target).find('.top');
            const checkHeight = $(window).scrollTop() + title.height() + parseInt($(event.target).css('margin-top'));
            if(event.target.offsetTop - checkHeight < 0) $(event.target).find('.top').removeClass('top').addClass('bottom');
            if(event.target.offsetTop - checkHeight >= 0) $(event.target).find('.top').removeClass('bottom').addClass('top');
            $(event.target).find('.btn-title').addClass('show');
        })

        $('button').mouseleave(event => {
            $(event.target).find('.btn-title').removeClass('show');
        })
        
    </script>

</body>
</html>